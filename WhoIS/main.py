import requests
from datetime import date
from bs4 import BeautifulSoup


class Main:
    def __init__(self, target, domain):
        self.target = target
        self.domain = domain

    def make_request(self):
        headers = {
            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) '
                          'Chrome/39.0.2171.95 Safari/537.36 '
        }
        unavailable_content = False
        g = requests.get(self.target, headers=headers)
        soup = BeautifulSoup(g.content, "html.parser")
        input_site = soup.find_all("div", class_="col-md-12 queryResponseBodyValue")
        for i in input_site:
            if 'WHOIS data currently unavailable.' in i:
                unavailable_content = True
                print("WHOIS data currently unavailable.")
        if unavailable_content is False:
            print(input_site)
        else:
            pass
        return input_site

    @staticmethod
    def save_file(filename: str, mode: str, content: str) -> None:
        f = open(file=str(date.today()) + filename + ".bin", mode=mode)
        f.write(content)
        f.close()


if __name__ == '__main__':
    domain = input("Type the name of website: ")
    target = "https://who.is/whois/" + domain
    W = Main(domain=domain, target=target)
    content = W.make_request()
    W.save_file("_whois_" + domain, "w+", content=str(content))
